{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Pro Portal - EventFlex</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}?v=1.7">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="dashboard-page" data-requires-auth="true" data-user-type="staff">
    <!-- Dashboard Navigation -->
    <nav class="dashboard-nav">
        <div class="nav-brand">
            <i class="fas fa-calendar-check"></i>
            <span>EventFlex</span>
        </div>
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="/#features">Features</a>
            <a href="/#how-it-works">How It Works</a>
        </div>
        <div class="nav-user">
            <span class="nav-link-text">Login</span>
            <a href="{% url 'signup_page' %}" class="btn-primary-small">Sign Up</a>
            <div class="user-profile">
                <img src="https://ui-avatars.com/api/?name=Test&background=10b981&color=fff" alt="Profile"
                    id="user-avatar">
                <a href="#profile"><span id="user-name-display">Test</span></a>
            </div>
        </div>
    </nav>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li class="active">
                    <a href="#dashboard"><i class="fas fa-home"></i> Dashboard</a>
                </li>
                <li>
                    <a href="#discover-jobs"><i class="fas fa-search"></i> Find Jobs</a>
                </li>
                <li>
                    <a href="#my-applications"><i class="fas fa-file-alt"></i> My Applications</a>
                </li>
                <li>
                    <a href="#my-bookings"><i class="fas fa-calendar-check"></i> My Bookings</a>
                </li>
                <li>
                    <a href="#wallet"><i class="fas fa-wallet"></i> Wallet</a>
                </li>
                <li>
                    <a href="#messages"><i class="fas fa-comments"></i> Messages</a>
                </li>
                <li>
                    <a href="#profile"><i class="fas fa-user"></i> My Profile</a>
                </li>
                <li>
                    <a href="{% url 'home' %}" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Dashboard Overview -->
            <section id="dashboard" class="dashboard-section active">
                <h1 id="welcome-message">Welcome back! üëã</h1>
                <p class="subtitle">You're doing great! Keep up the excellent work.</p>

                <!-- Verification Alert -->
                <div class="alert alert-info" id="verification-alert" style="display: none;">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Complete your profile!</strong> Add KYC and video verification to get more job
                        opportunities.
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-events-completed">0</h3>
                            <p>Events Completed</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-rating">0.0</h3>
                            <p>Average Rating</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon purple">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-upcoming">0</h3>
                            <p>Upcoming Events</p>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Grid -->
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h2>Upcoming Events</h2>
                            <a href="#my-bookings" class="view-all">View All</a>
                        </div>
                        <div class="event-list" id="staff-upcoming-events">
                            <p class="empty-state">Loading upcoming events...</p>
                        </div>
                    </div>
                </div>

                <!-- Reputation Section -->
                <div class="reputation-card">
                    <h2>Your Reputation</h2>
                    <div class="reputation-content">
                        <div class="reputation-badge">
                            <div id="badge-display" class="badge-display rising-star">
                                <i class="fas fa-star"></i>
                                <span id="badge-text">Rising Star</span>
                            </div>
                            <p id="badge-description">Keep building your reputation!</p>
                        </div>
                        <div class="reputation-stats">
                            <div class="rep-stat">
                                <h3 id="avg-rating">0.0/5.0</h3>
                                <p>Average Rating</p>
                                <div id="rating-stars" class="stars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                            </div>
                            <div class="rep-stat">
                                <h3 id="total-reviews">0</h3>
                                <p>Total Reviews</p>
                            </div>
                            <div class="rep-stat">
                                <h3 id="total-events">0</h3>
                                <p>Events Completed</p>
                            </div>
                        </div>
                        <div class="recent-reviews">
                            <h3>Recent Reviews</h3>
                            <div id="recent-reviews-list">
                                <p class="empty-state">No reviews yet. Complete events to receive reviews!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Discover Jobs Section -->
            <section id="discover-jobs" class="dashboard-section">
                <h1>Find Jobs</h1>
                <p class="subtitle">Discover opportunities that match your skills</p>

                <div class="search-filters">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" id="job-search-input"
                            placeholder="Search jobs by title, location, or organizer...">
                    </div>
                    <div class="filter-group">
                        <div class="filter-input-wrapper">
                            <i class="fas fa-map-marker-alt"></i>
                            <input type="text" id="filter-location"
                                placeholder="Enter location (e.g., Mumbai, Delhi, Bangalore)">
                        </div>
                        <select id="filter-event-type">
                            <option value="">All Event Types</option>
                            <option value="conference">Conference</option>
                            <option value="wedding">Wedding</option>
                            <option value="corporate">Corporate</option>
                            <option value="festival">Festival</option>
                            <option value="concert">Concert</option>
                            <option value="exhibition">Exhibition</option>
                        </select>
                        <select id="filter-pay-range">
                            <option value="">Pay Range</option>
                            <option value="0-2000">Up to ‚Çπ2000</option>
                            <option value="2000-3000">‚Çπ2000-3000</option>
                            <option value="3000-5000">‚Çπ3000-5000</option>
                            <option value="5000+">‚Çπ5000+</option>
                        </select>
                    </div>
                </div>

                <div class="jobs-list" id="jobListings">
                    <p class="empty-state">Loading available jobs...</p>
                </div>
            </section>

            <!-- My Applications Section -->
            <section id="my-applications" class="dashboard-section">
                <h1>My Applications</h1>
                <div class="tabs-secondary">
                    <button class="tab-btn-secondary active" data-tab="pending">Pending <span
                            id="pending-count">(0)</span></button>
                    <button class="tab-btn-secondary" data-tab="accepted">Accepted <span
                            id="accepted-count">(0)</span></button>
                    <button class="tab-btn-secondary" data-tab="rejected">Rejected <span
                            id="rejected-count">(0)</span></button>
                </div>

                <div class="applications-list" data-tab-content="pending" id="pending-applications">
                    <p class="empty-state">Loading applications...</p>
                </div>

                <div class="applications-list" data-tab-content="accepted" id="accepted-applications" hidden>
                    <p class="empty-state">Loading applications...</p>
                </div>

                <div class="applications-list" data-tab-content="rejected" id="rejected-applications" hidden>
                    <p class="empty-state">Loading applications...</p>
                </div>
            </section>

            <!-- My Bookings Section -->
            <section id="my-bookings" class="dashboard-section">
                <h1>My Bookings</h1>
                <div class="tabs-secondary">
                    <button class="tab-btn-secondary active" data-tab="upcoming">Upcoming <span
                            id="upcoming-bookings-count">(0)</span></button>
                    <button class="tab-btn-secondary" data-tab="completed">Completed <span
                            id="completed-bookings-count">(0)</span></button>
                    <button class="tab-btn-secondary" data-tab="cancelled">Cancelled <span
                            id="cancelled-bookings-count">(0)</span></button>
                </div>

                <div class="bookings-list" data-tab-content="upcoming" id="upcoming-bookings">
                    <p class="empty-state">Loading bookings...</p>
                </div>

                <div class="bookings-list" data-tab-content="completed" id="completed-bookings" hidden>
                    <p class="empty-state">Loading bookings...</p>
                </div>

                <div class="bookings-list" data-tab-content="cancelled" id="cancelled-bookings" hidden>
                    <p class="empty-state">No cancelled bookings.</p>
                </div>
            </section>

            <!-- Wallet Section -->
            <section id="wallet" class="dashboard-section">
                <h1>My Wallet</h1>

                <div class="wallet-overview">
                    <div class="wallet-card primary">
                        <h3>Available Balance</h3>
                        <p class="amount" id="available-balance">‚Çπ0</p>
                        <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                            <button class="btn-primary" onclick="showWithdrawModal()" style="flex: 1;">Withdraw to
                                Bank</button>
                            <button class="btn-outline" onclick="showBankDetailsModal()" style="flex: 1;">
                                <i class="fas fa-edit"></i> Edit Bank Details
                            </button>
                        </div>
                    </div>
                    <div class="wallet-card">
                        <h3>Pending Payments</h3>
                        <p class="amount" id="pending-amount">‚Çπ0</p>
                        <p class="sub-text" id="pending-text">From 0 completed events</p>
                    </div>
                </div>

                <div class="earnings-chart-card">
                    <h2>Earnings Overview</h2>
                    <div class="chart-placeholder">
                        <div class="chart-bars" id="earnings-chart">
                            <!-- Chart bars will be dynamically generated -->
                        </div>
                        <div class="chart-labels" id="chart-labels">
                            <!-- Month labels will be dynamically generated -->
                        </div>
                    </div>
                </div>

                <div class="transactions-card">
                    <h2>Transaction History</h2>
                    <table class="transactions-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Event</th>
                                <th>Organizer</th>
                                <th>Amount</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="transactions-list">
                            <!-- Transactions will be dynamically loaded -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Messages Section -->
            <section id="messages" class="dashboard-section">
                <h1>Messages</h1>
                <div class="messages-container">
                    <div class="messages-sidebar">
                        <div class="message-search">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search conversations...">
                        </div>
                        <div class="conversation-list" id="conversation-list">
                            <!-- Conversations will be loaded here dynamically -->
                            <p class="empty-state" style="padding: 2rem; text-align: center; color: #999;">
                                <i class="fas fa-comments"
                                    style="font-size: 3rem; margin-bottom: 1rem; display: block;"></i>
                                No messages yet
                            </p>
                        </div>
                    </div>
                    <div class="chat-area" id="chat-area" style="display: none;">
                        <div class="chat-header" id="chat-header">
                            <img src="" alt="" id="chat-organizer-avatar">
                            <div>
                                <h4 id="chat-organizer-name"></h4>
                                <p id="chat-organizer-role">Event Organizer</p>
                            </div>
                        </div>
                        <div class="chat-messages" id="messages-display">
                            <!-- Messages will be loaded here dynamically -->
                        </div>
                        <div class="chat-input">
                            <input type="text" id="message-input" placeholder="Type a message...">
                            <button class="btn-primary" onclick="sendMessage()"><i
                                    class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                    <div class="chat-area" id="no-chat-selected"
                        style="display: flex; align-items: center; justify-content: center; flex-direction: column; color: #999;">
                        <i class="fas fa-envelope-open-text"
                            style="font-size: 5rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>Select a conversation</h3>
                        <p>Choose a conversation from the left to view messages</p>
                    </div>
                </div>
            </section>

            <!-- Profile Section -->
            <section id="profile" class="dashboard-section">
                <h1>My Profile</h1>

                <div class="profile-completion">
                    <div class="completion-header">
                        <h3>Profile Completion</h3>
                        <span class="completion-percentage">85%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" style="width: 85%"></div>
                    </div>
                    <p>Complete your profile to get more job opportunities!</p>
                </div>

                <div class="profile-card">
                    <div class="profile-header">
                        <img src="https://ui-avatars.com/api/?name=Priya+Kumar&background=6366f1&color=fff"
                            alt="Profile" class="profile-image-large">
                        <div class="profile-header-info">
                            <h2>Priya Kumar</h2>
                            <p class="profile-role">Event Coordinator</p>
                            <div class="profile-badges">
                                <span class="badge-elite"><i class="fas fa-crown"></i> Elite Pro</span>
                                <span class="badge-verified"><i class="fas fa-check-circle"></i> KYC Verified</span>
                                <span class="badge-verified"><i class="fas fa-video"></i> Video Verified</span>
                            </div>
                            <button class="btn-outline" onclick="showPhotoModal()">Change Photo</button>
                            <button class="btn-primary" onclick="showVideoModal()">Upload Video Intro</button>
                        </div>
                    </div>

                    <form class="profile-form" onsubmit="handleProfileSave(event)" id="profile-form">
                        <h3>Personal Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Full Name *</label>
                                <input type="text" name="username" value="Priya Kumar">
                            </div>
                            <div class="form-group">
                                <label>Phone Number *</label>
                                <input type="tel" name="phone" value="+91 98765 43210">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Email *</label>
                                <input type="email" name="email" value="priya.kumar@email.com" readonly>
                            </div>
                            <div class="form-group">
                                <label>Date of Birth</label>
                                <input type="date" name="dob" value="1998-05-15">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>City *</label>
                            <select name="city">
                                <option value="">Select your city</option>
                                <!-- Metro Cities -->
                                <option value="Mumbai">Mumbai</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Bangalore">Bangalore</option>
                                <option value="Hyderabad">Hyderabad</option>
                                <option value="Ahmedabad">Ahmedabad</option>
                                <option value="Chennai">Chennai</option>
                                <option value="Kolkata">Kolkata</option>
                                <option value="Pune">Pune</option>
                                <!-- Tier 1 Cities -->
                                <option value="Surat">Surat</option>
                                <option value="Jaipur">Jaipur</option>
                                <option value="Lucknow">Lucknow</option>
                                <option value="Kanpur">Kanpur</option>
                                <option value="Nagpur">Nagpur</option>
                                <option value="Indore">Indore</option>
                                <option value="Thane">Thane</option>
                                <option value="Bhopal">Bhopal</option>
                                <option value="Visakhapatnam">Visakhapatnam</option>
                                <option value="Pimpri-Chinchwad">Pimpri-Chinchwad</option>
                                <option value="Patna">Patna</option>
                                <option value="Vadodara">Vadodara</option>
                                <option value="Ghaziabad">Ghaziabad</option>
                                <option value="Ludhiana">Ludhiana</option>
                                <option value="Agra">Agra</option>
                                <option value="Nashik">Nashik</option>
                                <option value="Faridabad">Faridabad</option>
                                <option value="Meerut">Meerut</option>
                                <option value="Rajkot">Rajkot</option>
                                <option value="Kalyan-Dombivali">Kalyan-Dombivali</option>
                                <option value="Vasai-Virar">Vasai-Virar</option>
                                <option value="Varanasi">Varanasi</option>
                                <option value="Srinagar">Srinagar</option>
                                <option value="Aurangabad">Aurangabad</option>
                                <option value="Dhanbad">Dhanbad</option>
                                <option value="Amritsar">Amritsar</option>
                                <option value="Navi Mumbai">Navi Mumbai</option>
                                <option value="Allahabad">Allahabad (Prayagraj)</option>
                                <option value="Ranchi">Ranchi</option>
                                <option value="Howrah">Howrah</option>
                                <option value="Coimbatore">Coimbatore</option>
                                <option value="Jabalpur">Jabalpur</option>
                                <option value="Gwalior">Gwalior</option>
                                <option value="Vijayawada">Vijayawada</option>
                                <option value="Jodhpur">Jodhpur</option>
                                <option value="Madurai">Madurai</option>
                                <option value="Raipur">Raipur</option>
                                <option value="Kota">Kota</option>
                                <option value="Chandigarh">Chandigarh</option>
                                <option value="Guwahati">Guwahati</option>
                                <option value="Solapur">Solapur</option>
                                <option value="Hubli-Dharwad">Hubli-Dharwad</option>
                                <option value="Mysore">Mysore</option>
                                <option value="Tiruchirappalli">Tiruchirappalli</option>
                                <option value="Bareilly">Bareilly</option>
                                <option value="Aligarh">Aligarh</option>
                                <option value="Tiruppur">Tiruppur</option>
                                <option value="Gurgaon">Gurgaon</option>
                                <option value="Moradabad">Moradabad</option>
                                <option value="Jalandhar">Jalandhar</option>
                                <option value="Bhubaneswar">Bhubaneswar</option>
                                <option value="Salem">Salem</option>
                                <option value="Warangal">Warangal</option>
                                <option value="Mira-Bhayandar">Mira-Bhayandar</option>
                                <option value="Thiruvananthapuram">Thiruvananthapuram</option>
                                <option value="Bhiwandi">Bhiwandi</option>
                                <option value="Saharanpur">Saharanpur</option>
                                <option value="Guntur">Guntur</option>
                                <option value="Amravati">Amravati</option>
                                <option value="Bikaner">Bikaner</option>
                                <option value="Noida">Noida</option>
                                <option value="Jamshedpur">Jamshedpur</option>
                                <option value="Bhilai">Bhilai</option>
                                <option value="Cuttack">Cuttack</option>
                                <option value="Firozabad">Firozabad</option>
                                <option value="Kochi">Kochi</option>
                                <option value="Nellore">Nellore</option>
                                <option value="Bhavnagar">Bhavnagar</option>
                                <option value="Dehradun">Dehradun</option>
                                <option value="Durgapur">Durgapur</option>
                                <option value="Asansol">Asansol</option>
                                <option value="Rourkela">Rourkela</option>
                                <option value="Nanded">Nanded</option>
                                <option value="Kolhapur">Kolhapur</option>
                                <option value="Ajmer">Ajmer</option>
                                <option value="Akola">Akola</option>
                                <option value="Gulbarga">Gulbarga</option>
                                <option value="Jamnagar">Jamnagar</option>
                                <option value="Ujjain">Ujjain</option>
                                <option value="Loni">Loni</option>
                                <option value="Siliguri">Siliguri</option>
                                <option value="Jhansi">Jhansi</option>
                                <option value="Ulhasnagar">Ulhasnagar</option>
                                <option value="Jammu">Jammu</option>
                                <option value="Sangli-Miraj">Sangli-Miraj</option>
                                <option value="Mangalore">Mangalore</option>
                                <option value="Erode">Erode</option>
                                <option value="Belgaum">Belgaum</option>
                                <option value="Ambattur">Ambattur</option>
                                <option value="Tirunelveli">Tirunelveli</option>
                                <option value="Malegaon">Malegaon</option>
                                <option value="Gaya">Gaya</option>
                                <option value="Jalgaon">Jalgaon</option>
                                <option value="Udaipur">Udaipur</option>
                                <option value="Maheshtala">Maheshtala</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Bio</label>
                            <textarea name="bio"
                                rows="4">Experienced event coordinator with 3+ years in the industry. Passionate about creating memorable experiences and skilled in managing large-scale events.</textarea>
                        </div>

                        <h3>Professional Details</h3>
                        <div class="form-group">
                            <label>Primary Role *</label>
                            <select>
                                <option value="coordinator" selected>Event Coordinator</option>
                                <option value="registration">Registration Staff</option>
                                <option value="hospitality">Hospitality Staff</option>
                                <option value="technical">Technical Support</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Skills *</label>
                            <div class="skill-tags">
                                <span class="skill-tag">Event Management <i class="fas fa-times"></i></span>
                                <span class="skill-tag">Coordination <i class="fas fa-times"></i></span>
                                <span class="skill-tag">Leadership <i class="fas fa-times"></i></span>
                                <span class="skill-tag">Communication <i class="fas fa-times"></i></span>
                                <input type="text" id="skillInput" placeholder="Add more skills...">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Years of Experience</label>
                                <select>
                                    <option value="0-1">Less than 1 year</option>
                                    <option value="1-2">1-2 years</option>
                                    <option value="2-5" selected>2-5 years</option>
                                    <option value="5+">5+ years</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Hourly Rate</label>
                                <input type="number" value="300" placeholder="‚Çπ per hour">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Languages Spoken</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" checked> Hindi</label>
                                <label><input type="checkbox" checked> English</label>
                                <label><input type="checkbox"> Marathi</label>
                                <label><input type="checkbox"> Tamil</label>
                            </div>
                        </div>

                        <h3>Verification</h3>
                        <div class="verification-status" id="verification-status-container">
                            <!-- KYC Verification - Dynamic -->
                            <div class="verification-item" id="kyc-verification-item">
                                <i class="fas fa-clock"></i>
                                <div>
                                    <h4>KYC Verification</h4>
                                    <p id="kyc-status-text">Not verified</p>
                                </div>
                                <button class="btn-outline btn-sm" onclick="showVerificationModal()"
                                    id="kyc-action-btn">Start
                                    Verification</button>
                            </div>

                            <!-- Video Introduction - Dynamic -->
                            <div class="verification-item" id="video-verification-item">
                                <i class="fas fa-clock"></i>
                                <div>
                                    <h4>Video Introduction</h4>
                                    <p id="video-status-text">Not uploaded</p>
                                </div>
                                <button class="btn-outline btn-sm" onclick="uploadVideoIntro()" id="video-action-btn"
                                    style="display: none;">Upload
                                    Video</button>
                            </div>

                            <!-- Police Verification - Same as KYC, shows real status -->
                            <div class="verification-item" id="police-verification-item">
                                <i class="fas fa-clock"></i>
                                <div>
                                    <h4>Police Verification</h4>
                                    <p id="police-status-text">Optional - Increases trust</p>
                                </div>
                                <button class="btn-outline btn-sm" onclick="showVerificationModal()"
                                    id="police-action-btn">Start
                                    Verification</button>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-outline">Cancel</button>
                            <button type="submit" class="btn-primary">Save Changes</button>
                        </div>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <!-- QR Code Modal -->
    <div id="qr-modal" class="modal" style="display: none;">
        <div class="modal-content qr-modal-content">
            <span class="close-modal" onclick="closeQRModal()">&times;</span>
            <h2>Event Check-in QR Code</h2>
            <p class="qr-instructions">Show this QR code at the event check-in</p>
            <div id="qr-code-container"></div>
            <div class="qr-booking-info">
                <h3 id="qr-event-title"></h3>
                <p id="qr-event-details"></p>
            </div>
            <button class="btn-primary" onclick="closeQRModal()">Close</button>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div id="withdraw-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" onclick="closeWithdrawModal()">&times;</span>
            <h2>Withdraw to Bank</h2>
            <form onsubmit="handleWithdraw(event)">
                <div class="form-group">
                    <label>Available Balance</label>
                    <input type="text" id="withdraw-balance" readonly>
                </div>
                <div class="form-group">
                    <label>Withdrawal Amount</label>
                    <input type="number" id="withdraw-amount" placeholder="Enter amount" required min="1">
                </div>
                <div class="form-group" id="bank-details-display" style="display: none;">
                    <label>Bank Account</label>
                    <input type="text" id="withdraw-bank-account" readonly>
                    <small style="color: #666; display: block; margin-top: 0.5rem;" id="withdraw-bank-name"></small>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-outline" onclick="closeWithdrawModal()">Cancel</button>
                    <button type="button" class="btn-outline" onclick="openBankDetailsFromWithdraw()" id="add-bank-btn"
                        style="display: none;">Add Bank Details</button>
                    <button type="submit" class="btn-primary" id="confirm-withdraw-btn">Confirm Withdrawal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bank Details Modal -->
    <div id="bank-details-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close-modal" onclick="closeBankDetailsModal()">&times;</span>
            <h2>Bank Account Details</h2>
            <p style="color: #666; margin-bottom: 1.5rem;">Add your bank account details to withdraw funds</p>
            <form onsubmit="handleSaveBankDetails(event)">
                <div class="form-group">
                    <label>Account Holder Name <span style="color: red;">*</span></label>
                    <input type="text" id="bank-account-holder" placeholder="Enter full name as per bank" required>
                </div>
                <div class="form-group">
                    <label>Account Number <span style="color: red;">*</span></label>
                    <input type="text" id="bank-account-number" placeholder="Enter account number" required>
                </div>
                <div class="form-group">
                    <label>Confirm Account Number <span style="color: red;">*</span></label>
                    <input type="text" id="bank-account-number-confirm" placeholder="Re-enter account number" required>
                </div>
                <div class="form-group">
                    <label>IFSC Code <span style="color: red;">*</span></label>
                    <input type="text" id="bank-ifsc-code" placeholder="Enter IFSC code" required maxlength="11"
                        style="text-transform: uppercase;">
                </div>
                <div class="form-group">
                    <label>Bank Name</label>
                    <input type="text" id="bank-name" placeholder="E.g., State Bank of India">
                </div>
                <div class="form-group">
                    <label>Branch Name</label>
                    <input type="text" id="bank-branch" placeholder="E.g., Mumbai Main Branch">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-outline" onclick="closeBankDetailsModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Save Bank Details</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Upload Photo Modal -->
    <div id="photo-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" onclick="closePhotoModal()">&times;</span>
            <h2>Change Profile Photo</h2>
            <form onsubmit="handlePhotoUpload(event)">
                <div class="form-group">
                    <input type="file" id="photo-input" accept="image/*" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-outline" onclick="closePhotoModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Upload Photo</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Upload Video Modal -->
    <div id="video-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" onclick="closeVideoModal()">&times;</span>
            <h2>Upload Video Introduction</h2>
            <p>Upload a short video (max 2 minutes) introducing yourself</p>
            <form onsubmit="handleVideoUpload(event)">
                <div class="form-group">
                    <input type="file" id="video-input" accept="video/*" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-outline" onclick="closeVideoModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Upload Video</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Job Application Form Modal -->
    <div id="application-modal" class="modal" style="display: none;">
        <div class="modal-content application-form-modal"
            style="max-width: 700px; max-height: 90vh; overflow-y: auto; background: rgba(255, 255, 255, 0.864); border-radius: 20px; border: 1px solid var(--gold); box-shadow: 0 20px 60px rgba(0,0,0,0.5);">
            <span class="close-modal" onclick="closeApplicationModal()"
                style="color: var(--gold); font-size: 2rem; cursor: pointer;">&times;</span>

            <div
                style="text-align: center; margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 2px solid rgba(218, 165, 32, 0.3);">
                <i class="fas fa-file-signature" style="font-size: 3rem; color: var(--gold); margin-bottom: 1rem;"></i>
                <h2 style="margin: 0; color: var(--gold); font-size: 1.8rem; font-weight: 600;">
                    Job Application
                </h2>
                <p id="modal-job-title" style="font-size: 1rem; margin-top: 0.5rem; color: #000;"></p>
            </div>

            <form id="application-form" class="professional-form">
                <input type="hidden" id="apply-job-id" name="job_id">

                <!-- Personal Information -->
                <div class="form-section-card">
                    <h3 class="section-title">
                        <i class="fas fa-user"></i> Personal Information
                    </h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="apply-full-name">Full Name <span class="required">*</span></label>
                            <input type="text" id="apply-full-name" name="full_name" required
                                placeholder="Enter your full name" class="form-input">
                        </div>

                        <div class="form-group">
                            <label for="apply-email">Email Address <span class="required">*</span></label>
                            <input type="email" id="apply-email" name="email" required
                                placeholder="your.email@example.com" class="form-input">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="apply-phone">Phone Number <span class="required">*</span></label>
                            <input type="tel" id="apply-phone" name="phone" required placeholder="+91 98765 43210"
                                class="form-input">
                        </div>

                        <div class="form-group">
                            <label for="apply-city">City <span class="required">*</span></label>
                            <input type="text" id="apply-city" name="city" required placeholder="Your city"
                                class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="apply-badge">Your Badge</label>
                        <div id="apply-badge-display" class="badge-display-inline"
                            style="padding: 1rem; background: rgba(218, 165, 32, 0.1); border-radius: 8px; text-align: center;">
                            <i class="fas fa-star" style="color: var(--gold); font-size: 1.5rem;"></i>
                            <span id="apply-badge-text"
                                style="color: var(--gold); font-weight: 600; font-size: 1.1rem; margin-left: 0.5rem;">Rising
                                Star</span>
                            <p style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">
                                <span id="apply-badge-rating">0.0</span> ‚≠ê |
                                <span id="apply-badge-reviews">0</span> reviews
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Professional Details -->
                <div class="form-section-card">
                    <h3 class="section-title">
                        <i class="fas fa-briefcase"></i> Professional Details
                    </h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="apply-role">Role Applying For <span class="required">*</span></label>
                            <input type="text" id="apply-role" name="role" list="apply-role-suggestions" required
                                placeholder="e.g., Photographer, Videographer" class="form-input">
                            <datalist id="apply-role-suggestions">
                                <!-- Dynamic suggestions will be populated here -->
                            </datalist>
                        </div>

                        <div class="form-group">
                            <label for="apply-experience">Years of Experience <span class="required">*</span></label>
                            <select id="apply-experience" name="experience_years" required class="form-input">
                                <option value="">Select experience</option>
                                <option value="0-1">0-1 years</option>
                                <option value="1-3">1-3 years</option>
                                <option value="3-5">3-5 years</option>
                                <option value="5-10">5-10 years</option>
                                <option value="10+">10+ years</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="apply-skills">Relevant Skills <span class="required">*</span></label>
                        <textarea id="apply-skills" name="relevant_skills" list="apply-skills-suggestions" required
                            rows="3"
                            placeholder="List your key skills (e.g., Photography, Videography, Event Coordination...)"
                            class="form-input"></textarea>
                        <datalist id="apply-skills-suggestions">
                            <!-- Dynamic suggestions will be populated here -->
                        </datalist>
                    </div>

                    <div class="form-group">
                        <label for="apply-portfolio">Portfolio/Website Link</label>
                        <input type="url" id="apply-portfolio" name="portfolio_link"
                            placeholder="https://yourportfolio.com" class="form-input">
                    </div>
                </div>

                <!-- Availability & Experience -->
                <div class="form-section-card">
                    <h3 class="section-title">
                        <i class="fas fa-calendar-check"></i> Availability & Experience
                    </h3>

                    <div class="form-group">
                        <label for="apply-availability">When are you available? <span class="required">*</span></label>
                        <select id="apply-availability" name="availability" required class="form-input">
                            <option value="">Select availability</option>
                            <option value="Immediate">Immediate availability</option>
                            <option value="Within 1 week">Within 1 week</option>
                            <option value="Within 2 weeks">Within 2 weeks</option>
                            <option value="Flexible">Flexible/Project-based</option>
                            <option value="Weekends only">Weekends only</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="apply-previous-events">Previous Event Experience <span
                                class="required">*</span></label>
                        <textarea id="apply-previous-events" name="previous_events"
                            list="apply-previous-events-suggestions" required rows="4"
                            placeholder="Describe 2-3 relevant events you've worked on. Include event type, your role, and key achievements."
                            class="form-input"></textarea>
                        <datalist id="apply-previous-events-suggestions">
                            <!-- Dynamic suggestions will be populated here -->
                        </datalist>
                    </div>
                </div>

                <!-- Why Apply & Compensation -->
                <div class="form-section-card">
                    <h3 class="section-title">
                        <i class="fas fa-comment-dots"></i> Application Statement
                    </h3>

                    <div class="form-group">
                        <label for="apply-why-interested">Why are you interested in this position? <span
                                class="required">*</span></label>
                        <textarea id="apply-why-interested" name="why_interested" required rows="4"
                            placeholder="Tell us what excites you about this opportunity and why you're a great fit..."
                            class="form-input"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="apply-cover-message">Cover Message <span class="required">*</span></label>
                        <textarea id="apply-cover-message" name="cover_message" required rows="4"
                            placeholder="Write a brief message to the organizer. Highlight your unique value and enthusiasm..."
                            class="form-input"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="apply-expected-compensation">Expected Compensation</label>
                        <input type="text" id="apply-expected-compensation" name="expected_compensation"
                            placeholder="e.g., ‚Çπ2000/day or Negotiable" class="form-input">
                    </div>
                </div>

                <!-- Resume Upload -->
                <div class="form-section-card">
                    <h3 class="section-title">
                        <i class="fas fa-file-upload"></i> Resume/CV Upload
                    </h3>

                    <div class="form-group">
                        <label for="apply-cv">Upload Resume/CV <span class="required">*</span></label>
                        <div class="file-upload-wrapper">
                            <input type="file" id="apply-cv" name="cv" accept=".pdf,.doc,.docx" required
                                class="file-input">
                            <div class="file-upload-label">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span>Click to upload or drag and drop</span>
                                <small>PDF, DOC, DOCX (Max 5MB) - Required</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-actions"
                    style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: space-between; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                    <button type="button" class="btn-outline" onclick="closeApplicationModal()" style="flex: 1;">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="btn-primary"
                        style="flex: 2; background: linear-gradient(135deg, #daa520 0%, #b8860b 100%); padding: 1rem 2rem; font-size: 1.1rem;">
                        <i class="fas fa-paper-plane"></i> Submit Application
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Verification Modal -->
    <div id="verification-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <span class="close-modal" onclick="closeVerificationModal()">&times;</span>
            <h2><i class="fas fa-shield-alt"></i> KYC Verification</h2>
            <p style="color: #999; margin-bottom: 2rem;">Complete your verification to get access to more jobs and build
                trust with organizers.</p>

            <form id="verification-form" onsubmit="handleVerificationSubmit(event)">
                <!-- Personal Information -->
                <div class="form-section-card">
                    <h3 class="section-title"><i class="fas fa-user"></i> Personal Information</h3>

                    <div class="form-group">
                        <label for="verify-full-name">Full Name (As per ID) <span class="required">*</span></label>
                        <input type="text" id="verify-full-name" name="full_name" required class="form-input"
                            placeholder="Enter your full legal name">
                    </div>

                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label for="verify-dob">Date of Birth <span class="required">*</span></label>
                            <input type="date" id="verify-dob" name="date_of_birth" required class="form-input">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="verify-gender">Gender <span class="required">*</span></label>
                            <select id="verify-gender" name="gender" required class="form-input">
                                <option value="">Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="verify-address">Complete Address <span class="required">*</span></label>
                        <textarea id="verify-address" name="address" required rows="3" class="form-input"
                            placeholder="House/Flat No., Street, Area, City, State, PIN Code"></textarea>
                    </div>
                </div>

                <!-- Document Information -->
                <div class="form-section-card">
                    <h3 class="section-title"><i class="fas fa-id-card"></i> Identity Document</h3>

                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label for="verify-doc-type">Document Type <span class="required">*</span></label>
                            <select id="verify-doc-type" name="document_type" required class="form-input">
                                <option value="">Select document type</option>
                                <option value="aadhar">Aadhar Card</option>
                                <option value="pan">PAN Card</option>
                                <option value="voter_id">Voter ID</option>
                                <option value="driving_license">Driving License</option>
                                <option value="passport">Passport</option>
                            </select>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="verify-doc-number">Document Number <span class="required">*</span></label>
                            <input type="text" id="verify-doc-number" name="document_number" required class="form-input"
                                placeholder="Enter document number">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Document Photos <span class="required">*</span></label>
                        <p style="color: #999; font-size: 0.9rem; margin-bottom: 1rem;">Upload clear photos of your
                            document (front and back if applicable)</p>
                        <div class="file-upload-wrapper" style="margin-bottom: 1rem;">
                            <input type="file" id="verify-doc-front" name="document_front" accept="image/*"
                                class="file-input">
                            <div class="file-upload-label">
                                <i class="fas fa-camera"></i>
                                <span>Front Side of Document</span>
                            </div>
                        </div>
                        <div class="file-upload-wrapper">
                            <input type="file" id="verify-doc-back" name="document_back" accept="image/*"
                                class="file-input">
                            <div class="file-upload-label">
                                <i class="fas fa-camera"></i>
                                <span>Back Side of Document (if applicable)</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Selfie with Document <span class="required">*</span></label>
                        <p style="color: #999; font-size: 0.9rem; margin-bottom: 1rem;">Take a clear selfie holding your
                            ID document next to your face</p>
                        <div class="file-upload-wrapper">
                            <input type="file" id="verify-selfie" name="selfie_photo" accept="image/*"
                                class="file-input">
                            <div class="file-upload-label">
                                <i class="fas fa-camera"></i>
                                <span>Upload Selfie with Document</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Emergency Contact -->
                <div class="form-section-card">
                    <h3 class="section-title"><i class="fas fa-phone-alt"></i> Emergency Contact</h3>

                    <div class="form-group">
                        <label for="verify-emergency-name">Emergency Contact Name</label>
                        <input type="text" id="verify-emergency-name" name="emergency_contact_name" class="form-input"
                            placeholder="Name of emergency contact person">
                    </div>

                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label for="verify-emergency-phone">Emergency Contact Phone</label>
                            <input type="tel" id="verify-emergency-phone" name="emergency_contact_phone"
                                class="form-input" placeholder="+91 98765 43210">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="verify-emergency-relation">Relationship</label>
                            <input type="text" id="verify-emergency-relation" name="emergency_contact_relation"
                                class="form-input" placeholder="e.g., Parent, Spouse, Sibling">
                        </div>
                    </div>
                </div>

                <!-- Professional Details -->
                <div class="form-section-card">
                    <h3 class="section-title"><i class="fas fa-briefcase"></i> Professional Information</h3>

                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label for="verify-experience">Years of Experience</label>
                            <select id="verify-experience" name="years_of_experience" class="form-input">
                                <option value="">Select experience</option>
                                <option value="0-1">0-1 years</option>
                                <option value="1-3">1-3 years</option>
                                <option value="3-5">3-5 years</option>
                                <option value="5-10">5-10 years</option>
                                <option value="10+">10+ years</option>
                            </select>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="verify-specialization">Specialization/Role</label>
                            <input type="text" id="verify-specialization" name="specialization" class="form-input"
                                placeholder="e.g., Event Coordinator, Photographer">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="verify-previous-companies">Previous Companies/Events</label>
                        <textarea id="verify-previous-companies" name="previous_companies" rows="3" class="form-input"
                            placeholder="List previous companies or major events you've worked with"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="verify-certifications">Certifications</label>
                        <textarea id="verify-certifications" name="certifications" rows="2" class="form-input"
                            placeholder="Any relevant certifications or training"></textarea>
                    </div>
                </div>

                <div class="modal-actions"
                    style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: space-between;">
                    <button type="button" class="btn-outline" onclick="closeVerificationModal()" style="flex: 1;">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="btn-primary"
                        style="flex: 2; background: linear-gradient(135deg, #daa520 0%, #b8860b 100%);">
                        <i class="fas fa-check-circle"></i> Submit Verification
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Chat Modal (OLX-style) -->
    <div id="chat-modal" class="chat-modal" style="display: none;">
        <div class="chat-container">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="chat-header-info">
                    <img id="chat-partner-avatar" src="" alt="User" class="chat-avatar">
                    <div>
                        <h3 id="chat-partner-name">User</h3>
                        <p id="chat-partner-status" class="chat-status">Online</p>
                    </div>
                </div>
                <button class="chat-close-btn" onclick="closeChatModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Chat Messages -->
            <div id="chat-messages" class="chat-messages">
                <!-- Messages will be loaded here -->
            </div>

            <!-- Chat Input -->
            <div class="chat-input-container">
                <form id="chat-form" onsubmit="sendChatMessage(event)">
                    <input type="hidden" id="chat-partner-id" value="">
                    <textarea id="chat-message-input" placeholder="Type a message..." rows="1"
                        onkeydown="handleChatKeyPress(event)"></textarea>
                    <button type="submit" class="chat-send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script src="{% static 'js/script.js' %}?v=1.7"></script>
</body>

</html>